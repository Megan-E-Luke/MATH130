---
title: "Lab 3: More data management and grouping using factors"
author: "NAME"
date: "DATE"
---

Answer the questions in this lab and submit the compiled HTML or PDF by the deadline. Don't forget to change your name and date in the above header. 

This lab uses the `dplyr` and `nycflights13` packages. It is good habit to load all packages in the first code chunk. 

```{r, warning=FALSE, message=FALSE}
library(dplyr)
library(nycflights13)
```



# dplyr

## Basic verbs
You will use the `flights` data set for the next few exercises.  Let's load that into our working environment so we can look at it.
```{r}
flights <- flights
```

* At each step use the assignment operator `<-` to store the results into a new data table and use that data in the next step. 
* At each step, print out the resulting data frame so you can see the results. 
* These steps have been started for you. You must remove the `eval=FALSE` in the code chunk to get it to work when you knit. 

1. Use `select()` to extract the following variables: `origin`, `distance`, and `air_time`, `dest`. 

```{r, eval=FALSE}
f1 <- flights %>% select()
f1
```

2. Use `filter()` to select only the flights whose destination (`dest`) is Atlanta (ATL)

```{r, eval=FALSE}
f2 <- f1 %>% filter()
f2
```

3. Use `mutate()` to create a new variable `speed` that calculates speed of the plane as `distance/air_time*60.

```{r, eval=FALSE}
f3 <- f1 %>% mutate()
f3
```



5. Use `dplyr` chaining magic to...

* take the planes data set that you created earlier _and then_...
* `group_by`the `num_engines` _and then_...
* use `summarise` to create three new variables: 
    - `ave_seats` as the `mean()` number of `seats`
    - `min_seats` as the `min()` number of `seats`
    - `max_seats` as the `max()` number of `seats`

```{r}

```


# Multivariable graphing

1. A scatterplot of length of pregnancy in `weeks` and the babies `weight`, color the points and lowess lines by `gender`. 


2. Use `facet_wrap` to create side by side boxplots with overlaid violins (using good trasparency options) of `weight` by `mature`, paneled by `whitemom`. 

3. Remove the NA group from the previous plot and recreate the plot. 



4. Now add points for the means to the above plot. 


5. Use `coord_flip()` to make the boxes horizontal



6. Go to the [R Cookbook](http://www.cookbook-r.com/Graphs/) and learn how to remove that legend. 

7. Apply a `theme_minimal()` or `theme_bw()` layer to remove the grey background from the plot. 

